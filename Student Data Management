{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "d76800cd",
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "ename": "ProgrammingError",
     "evalue": "1050 (42S01): Table 'newp' already exists",
     "output_type": "error",
     "traceback": [
      "\u001b[1;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[1;31mMySQLInterfaceError\u001b[0m                       Traceback (most recent call last)",
      "\u001b[1;32m~\\anaconda3\\lib\\site-packages\\mysql\\connector\\connection_cext.py\u001b[0m in \u001b[0;36mcmd_query\u001b[1;34m(self, query, raw, buffered, raw_as_string)\u001b[0m\n\u001b[0;32m    522\u001b[0m                 \u001b[0mquery\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mquery\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mencode\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;34m'utf-8'\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m--> 523\u001b[1;33m             self._cmysql.query(query,\n\u001b[0m\u001b[0;32m    524\u001b[0m                                \u001b[0mraw\u001b[0m\u001b[1;33m=\u001b[0m\u001b[0mraw\u001b[0m\u001b[1;33m,\u001b[0m \u001b[0mbuffered\u001b[0m\u001b[1;33m=\u001b[0m\u001b[0mbuffered\u001b[0m\u001b[1;33m,\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;31mMySQLInterfaceError\u001b[0m: Table 'newp' already exists",
      "\nDuring handling of the above exception, another exception occurred:\n",
      "\u001b[1;31mProgrammingError\u001b[0m                          Traceback (most recent call last)",
      "\u001b[1;32m~\\AppData\\Local\\Temp/ipykernel_8232/2895616328.py\u001b[0m in \u001b[0;36m<module>\u001b[1;34m\u001b[0m\n\u001b[0;32m      3\u001b[0m \u001b[0mcursor\u001b[0m\u001b[1;33m=\u001b[0m\u001b[0mdb\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mcursor\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m      4\u001b[0m \u001b[0mqur\u001b[0m\u001b[1;33m=\u001b[0m\u001b[1;34m\"create table newp(name VARCHAR(20),grade VARCHAR(20),prn VARCHAR(20),address VARCHAR(20),dept VARCHAR(20),dob VARCHAR(20),emailid VARCHAR(20),mobno VARCHAR(20),marks VARCHAR(20))\"\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m----> 5\u001b[1;33m \u001b[0mcursor\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mexecute\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mqur\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[0;32m      6\u001b[0m \u001b[0mdb\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mclose\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;32m~\\anaconda3\\lib\\site-packages\\mysql\\connector\\cursor_cext.py\u001b[0m in \u001b[0;36mexecute\u001b[1;34m(self, operation, params, multi)\u001b[0m\n\u001b[0;32m    267\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m    268\u001b[0m         \u001b[1;32mtry\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m--> 269\u001b[1;33m             result = self._cnx.cmd_query(stmt, raw=self._raw,\n\u001b[0m\u001b[0;32m    270\u001b[0m                                          \u001b[0mbuffered\u001b[0m\u001b[1;33m=\u001b[0m\u001b[0mself\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0m_buffered\u001b[0m\u001b[1;33m,\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m    271\u001b[0m                                          raw_as_string=self._raw_as_string)\n",
      "\u001b[1;32m~\\anaconda3\\lib\\site-packages\\mysql\\connector\\connection_cext.py\u001b[0m in \u001b[0;36mcmd_query\u001b[1;34m(self, query, raw, buffered, raw_as_string)\u001b[0m\n\u001b[0;32m    526\u001b[0m                                query_attrs=self._query_attrs)\n\u001b[0;32m    527\u001b[0m         \u001b[1;32mexcept\u001b[0m \u001b[0mMySQLInterfaceError\u001b[0m \u001b[1;32mas\u001b[0m \u001b[0mexc\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m--> 528\u001b[1;33m             raise errors.get_mysql_exception(exc.errno, msg=exc.msg,\n\u001b[0m\u001b[0;32m    529\u001b[0m                                              sqlstate=exc.sqlstate)\n\u001b[0;32m    530\u001b[0m         \u001b[1;32mexcept\u001b[0m \u001b[0mAttributeError\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[1;31mProgrammingError\u001b[0m: 1050 (42S01): Table 'newp' already exists"
     ]
    }
   ],
   "source": [
    "import mysql.connector\n",
    "db=mysql.connector.connect(user='root',password='Python@123',host='localhost',database='project2')\n",
    "cursor=db.cursor()\n",
    "qur=\"create table newp(name VARCHAR(20),grade VARCHAR(20),prn VARCHAR(20),address VARCHAR(20),dept VARCHAR(20),dob VARCHAR(20),emailid VARCHAR(20),mobno VARCHAR(20),marks VARCHAR(20))\"\n",
    "cursor.execute(qur)\n",
    "db.close()\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "7b2b5dc3",
   "metadata": {},
   "outputs": [],
   "source": [
    "import mysql.connector\n",
    "from tkinter import messagebox\n",
    "from tkinter import *\n",
    "from tkinter import ttk\n",
    "\n",
    "\n",
    "win=Tk()\n",
    "win.title('STUDENT MANAGEMENT SYSTEM')\n",
    "#win.iconbitmap('wall_AvY_icon.ico')\n",
    "win.minsize(width=800,height=600)\n",
    "win.configure(bg='skyblue') \n",
    "\n",
    "\n",
    "\n",
    "def show():\n",
    "    db=mysql.connector.connect(user='root',password='Python@123',host='localhost',database='project2')\n",
    "    cursor=db.cursor()\n",
    "    qur=\"select * from newp\"\n",
    "    cursor.execute(qur)\n",
    "    result=cursor.fetchall()\n",
    "    for i in result:\n",
    "        treev.insert(\"\",-1,values=(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8]))\n",
    "    db.close()\n",
    "    \n",
    "    \n",
    "\n",
    "def add():\n",
    "    name=n1.get()\n",
    "    grade=c1.get()\n",
    "    prn=p1.get()\n",
    "    address=a1.get()\n",
    "    dept=d1.get()\n",
    "    dob=b1.get()\n",
    "    emailid=e1.get()\n",
    "    mobno=m1.get()\n",
    "    marks=ms1.get()\n",
    "    \n",
    "    if (name==\"\"or grade==\"\"or prn==\"\"or address==\"\"or dept==\"\"or dob==\"\"or emailid==\"\"or mobno==\"\"or marks==\"\"):\n",
    "        messagebox.showinfo(\"student info\",\"all fields are required to fill\")\n",
    "    else:\n",
    "        db=mysql.connector.connect(user='root',password='Python@123',host='localhost',database='project2')\n",
    "        cursor=db.cursor()\n",
    "        qur=\"INSERT INTO newp(name,grade,prn,address,dept,dob,emailid,mobno,marks) VALUES('%s','%s','%s','%s','%s','%s','%s','%s','%s')\"%(name,grade,prn,address,dept,dob,emailid,mobno,marks)\n",
    "        cursor.execute(qur)\n",
    "        db.commit()\n",
    "        db.close()\n",
    "        messagebox.showinfo(\"student info\",\"info submitted\")\n",
    "        n1.set('')\n",
    "        c1.set('')\n",
    "        p1.set('')\n",
    "        a1.set('')\n",
    "        d1.set('')\n",
    "        b1.set('')\n",
    "        e1.set('')\n",
    "        m1.set('')\n",
    "        ms1.set('')\n",
    "        \n",
    "        \n",
    "\n",
    "def result():\n",
    "    root=Tk()\n",
    "    root.configure(bg='white')\n",
    "    root.title('Result')\n",
    "    root.geometry('500x400')\n",
    "    \n",
    "    def disp():\n",
    "        reldata=relent.get()\n",
    "        if (reldata==\"\"):\n",
    "            messagebox.showinfo(\"student info\",\"all fields are required to fill\")\n",
    "        else:\n",
    "            db=mysql.connector.connect(user='root',password='Python@123',host='localhost',database='project2')\n",
    "            cursor=db.cursor()\n",
    "            qur=\"SELECT marks from newp where name='%s'\"%(reldata)\n",
    "            cursor.execute(qur)\n",
    "            result=cursor.fetchall()\n",
    "            m=result[0][0]\n",
    "            print(m)\n",
    "            new.config(text='marks='+m+' %')   #[0][:2]\n",
    "            db.close()\n",
    "            rc.set('')\n",
    "        \n",
    "    \n",
    "    res1=Label(root,text=\"Enter the name of student :\",height=2,fg='black',bg='white',bd=5,font=('Cooper',8,'bold'))\n",
    "    res1.place(x=10,y=40)\n",
    "    \n",
    "    \n",
    "    rc=StringVar()\n",
    "    relent=Entry(root,bg='white',fg='black',width=30,bd=5,textvariable=rc,relief='ridge',font=('Cooper',8,'bold'))  \n",
    "    relent.place(x=200,y=40)\n",
    "\n",
    "    relbtn=Button(root,text='Show Result',width=20,command=disp).place(x=200,y=90)\n",
    "    \n",
    "    new=Label(root,text=\"MARKS :\",height=10,width=40,fg='black',bg='light pink',bd=5,font=('Cooper',16,'bold'))\n",
    "    new.place(x=10,y=200)\n",
    "    \n",
    "    root.mainloop()    \n",
    "\n",
    "\n",
    "\n",
    "def select():\n",
    "    s=treev.focus()\n",
    "    a=treev.item(s,'values')\n",
    "    print(a)\n",
    "    up=updata.get()\n",
    "    if (up==\"\"):\n",
    "        messagebox.showinfo(\"student info\",\"all fields are required to fill\")\n",
    "    else:\n",
    "        db=mysql.connector.connect(user='root',password='Python@123',host='localhost',database='project2')\n",
    "        cursor=db.cursor()\n",
    "        qur=\"select * from newp where name='%s'\"%(up)\n",
    "        cursor.execute(qur)\n",
    "        result=cursor.fetchall()\n",
    "        for i in result:\n",
    "            ent1.insert(0,i[0])\n",
    "            ent2.insert(0,i[1])\n",
    "            ent3.insert(0,i[2])\n",
    "            ent4.insert(0,i[3])\n",
    "            ent5.insert(0,i[4])\n",
    "            ent6.insert(0,i[5])\n",
    "            ent7.insert(0,i[6])\n",
    "            ent8.insert(0,i[7])\n",
    "            ent9.insert(0,i[8])    \n",
    "            \n",
    "        db.close()\n",
    "        updata.set('')\n",
    "\n",
    "\n",
    "def update():\n",
    "    name=n1.get()\n",
    "    grade=c1.get()\n",
    "    prn=p1.get()\n",
    "    address=a1.get()\n",
    "    dept=d1.get()\n",
    "    dob=b1.get()\n",
    "    emailid=e1.get()\n",
    "    mobno=m1.get()\n",
    "    marks=ms1.get()\n",
    "    \n",
    "    if (name==\"\"or grade==\"\"or prn==\"\"or address==\"\"or dept==\"\"or dob==\"\"or emailid==\"\"or mobno==\"\"or marks==\"\"):\n",
    "        messagebox.showinfo(\"student info\",\"all fields are required to fill\")\n",
    "    else:\n",
    "        db=mysql.connector.connect(user='root',password='Python@123',host='localhost',database='project2')\n",
    "        cursor=db.cursor()\n",
    "        qur=\"UPDATE newp SET grade='%s',prn='%s',address='%s',dept='%s',dob='%s',emailid='%s',mobno='%s',marks='%s' WHERE name='%s'\"%(grade,prn,address,dept,dob,emailid,mobno,marks,name)\n",
    "        cursor.execute(qur)\n",
    "        db.commit()\n",
    "        db.close()\n",
    "        messagebox.showinfo(\"student info\",\"info updated\")\n",
    "        n1.set('')\n",
    "        c1.set('')\n",
    "        p1.set('')\n",
    "        a1.set('')\n",
    "        d1.set('')\n",
    "        b1.set('')\n",
    "        e1.set('')\n",
    "        m1.set('')\n",
    "        ms1.set('')\n",
    "\n",
    "\n",
    "\n",
    "def delete():\n",
    "    deldata=tt.get()\n",
    "    if (deldata==\"\"):\n",
    "        messagebox.showinfo(\"student info\",\"all fields are required to fill\")\n",
    "    else:\n",
    "        db=mysql.connector.connect(user='root',password='Python@123',host='localhost',database='project2')\n",
    "        cursor=db.cursor()\n",
    "        qur=\"DELETE FROM newp where name='%s'\"%(deldata)\n",
    "        cursor.execute(qur)\n",
    "        db.commit()\n",
    "        db.close()\n",
    "        messagebox.showinfo(\"student info\",\"info deleted\")\n",
    "        tt.set('')\n",
    "\n",
    "\n",
    "\n",
    "def clear():\n",
    "    treev.delete(*treev.get_children())\n",
    "\n",
    "\n",
    "\n",
    "\n",
    "\n",
    "lbl1=Label(win,text=\"STUDENT MANAGEMENT SYSTEM\",relief='ridge',fg='black',bg='white',bd=5,font=('times new roman',20,'bold'))\n",
    "lbl1.place(x=550,y=30)\n",
    "\n",
    "n1=StringVar()    # name\n",
    "c1=StringVar()    # grade\n",
    "p1=StringVar()    # prn\n",
    "a1=StringVar()    # address\n",
    "d1=StringVar()    # department\n",
    "b1=StringVar()    # date of birth\n",
    "e1=StringVar()    # email id\n",
    "m1=StringVar()    # mobile no\n",
    "ms1=StringVar()   # marks\n",
    "\n",
    "\n",
    "\n",
    "lbl2=Label(win,text=\"Name\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl2.place(x=20,y=100)\n",
    "\n",
    "ent1=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=n1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent1.place(x=220,y=100)\n",
    "\n",
    "lbl3=Label(win,text=\"Grade\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl3.place(x=20,y=140)\n",
    "\n",
    "ent2=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=c1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent2.place(x=220,y=140)\n",
    "\n",
    "lbl4=Label(win,text=\"PRN\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl4.place(x=20,y=180)\n",
    "\n",
    "ent3=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=p1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent3.place(x=220,y=180)\n",
    "\n",
    "lbl5=Label(win,text=\"Address\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl5.place(x=20,y=220)\n",
    "\n",
    "ent4=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=a1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent4.place(x=220,y=220)\n",
    "\n",
    "lbl6=Label(win,text=\"Department\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl6.place(x=20,y=260)\n",
    "\n",
    "ent5=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=d1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent5.place(x=220,y=260)\n",
    "\n",
    "\n",
    "lbl7=Label(win,text=\"Date of Birth\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl7.place(x=20,y=300)\n",
    "\n",
    "ent6=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=b1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent6.place(x=220,y=300)\n",
    "\n",
    "lbl8=Label(win,text=\"Email Id\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl8.place(x=20,y=340)\n",
    "\n",
    "ent7=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=e1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent7.place(x=220,y=340)\n",
    "\n",
    "lbl9=Label(win,text=\"Mobile No\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl9.place(x=20,y=380)\n",
    "\n",
    "ent8=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=m1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent8.place(x=220,y=380)\n",
    "\n",
    "lbl10=Label(win,text=\"Marks\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl10.place(x=20,y=420)\n",
    "\n",
    "ent9=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=ms1,relief='ridge',font=('times new roman',12,'bold'))  \n",
    "ent9.place(x=220,y=420)\n",
    "\n",
    "\n",
    "\n",
    "showbtn=Button(win,text='SHOW',width=20,command=show).place(x=80,y=480)\n",
    "\n",
    "addbtn=Button(win,text='ADD',width=20,command=add).place(x=400,y=480)\n",
    "\n",
    "exitbtn=Button(win,text='EXIT',width=20,command=win.destroy).place(x=80,y=520)\n",
    "\n",
    "resbtn=Button(win,text='RESULT',command=result,width=20).place(x=400,y=520)\n",
    "\n",
    "tt=StringVar()\n",
    "\n",
    "lbl11=Label(win,text=\"Delete by Name\",relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl11.place(x=40,y=560)\n",
    "\n",
    "ent10=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=tt,relief='ridge',font=('times new roman',12,'bold'))\n",
    "ent10.place(x=240,y=560)\n",
    "\n",
    "delbtn=Button(win,text='Delete',width=20,command=delete).place(x=240,y=600)\n",
    "\n",
    "\n",
    "\n",
    "updata=StringVar()\n",
    "\n",
    "lbl12=Label(win,text='Update by Name',relief='ridge',width=20,fg='black',bg='white',bd=5,font=('times new roman',12,'bold'))\n",
    "lbl12.place(x=40,y=640)\n",
    "\n",
    "ent11=Entry(win,bg='white',fg='black',width=40,bd=5,textvariable=updata,relief='ridge',font=('times new roman',12,'bold'))\n",
    "ent11.place(x=240,y=640)\n",
    "\n",
    "\n",
    "selbtn=Button(win,text='SELECT',width=20,command=select).place(x=240,y=680)\n",
    "upbtn=Button(win,text='UPDATE',width=20,command=update).place(x=380,y=680)\n",
    "\n",
    "\n",
    "\n",
    "\n",
    "\n",
    "treev = ttk.Treeview(win, selectmode ='browse',height=20)\n",
    "treev.place(x=580,y=100,width=800)\n",
    "\n",
    "treev[\"columns\"] = (\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\")\n",
    "treev['show'] = 'headings'\n",
    "treev.column(\"1\",width = 60, anchor ='c')    # c=centre: se=southeast\n",
    "treev.column(\"2\",width = 60, anchor ='se')\n",
    "treev.column(\"3\",width = 60, anchor ='se')\n",
    "treev.column(\"4\",width = 60, anchor ='se')      # anchor(used for placing)\n",
    "treev.column(\"5\",width = 60, anchor ='se')    # c=centre: se=southeast\n",
    "treev.column(\"6\",width = 60, anchor ='se')\n",
    "treev.column(\"7\",width = 60, anchor ='se')\n",
    "treev.column(\"8\",width = 60, anchor ='se')\n",
    "treev.column(\"9\",width = 60, anchor ='se')    \n",
    "\n",
    "\n",
    "treev.heading(\"1\", text =\"Name\")\n",
    "treev.heading(\"2\", text =\"Grade\")\n",
    "treev.heading(\"3\", text =\"PRN\")\n",
    "treev.heading(\"4\", text =\"Address\")\n",
    "treev.heading(\"5\", text =\"Department\")\n",
    "treev.heading(\"6\", text =\"Date of Birth\")\n",
    "treev.heading(\"7\", text =\"Email Id\")\n",
    "treev.heading(\"8\", text =\"Mobile No\")\n",
    "treev.heading(\"9\", text =\"Marks\")\n",
    "\n",
    "\n",
    "clearbtn=Button(win,text='Clear',width=20,command=clear).place(x=950,y=560)\n",
    "\n",
    "\n",
    "\n",
    "win.mainloop()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "472c6493",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
